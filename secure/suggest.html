<!DOCTYPE html>
<html lang="am">
<head>
  <meta charset="UTF-8">
  <title>á‹¨áˆ€áˆ³á‰¥ áŠ áˆµá‰°á‹³á‹°áˆ­</title>
  <link rel="stylesheet" href="css/suggest.css">
</head>
<body>
  <div class="container">
    <h1>á‹¨á‰°áˆ‹áŠ© áˆ€áˆ³á‰¦á‰½</h1>
      <a href="/logout" class="logout-btn" style="margin-left: 700px;"><button>ğŸšª á‹áŒ£</button></a><br><br><br>
    <div id="suggestionList"></div>
  </div>

  <script>
    // Fetch all suggestions
    fetch('/admin/suggestions')
      .then(res => res.json())
      .then(data => {
        const list = document.getElementById('suggestionList');
        if (data.length === 0) {
          list.innerHTML = '<p>áˆáŠ•áˆ áˆ€áˆ³á‰¥ áŠ áˆá‰°áŒˆáŠ˜áˆá¢</p>';
          return;
        }

        data.forEach(item => {
          const div = document.createElement('div');
          div.className = 'suggestion-box';
          div.innerHTML = `
            <p>${item.message}</p>
            <small>á‰€áŠ•: ${new Date(item.submitted_at).toLocaleString()}</small><br/>
            <button onclick="deleteSuggestion(${item.id})">áˆ€áˆ³á‰¡áŠ• áŠ áˆµá‹ˆáŒá‹µ</button>
          `;
          list.appendChild(div);
        });
      });

    // Delete suggestion
    function deleteSuggestion(id) {
      if (!confirm('áŠ¥áˆ­áŒáŒ áŠ› áŠá‹á‰µ áˆ€áˆ³á‰¡áŠ• áˆˆáˆ˜áˆ°áˆ¨á‹?')) return;
      fetch(`/admin/delete/${id}`, { method: 'DELETE' })
        .then(res => res.text())
        .then(() => location.reload());
    }
  </script>
  <script src="js/suggest.js"></script>
</body>
</html>
