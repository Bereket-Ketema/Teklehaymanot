<!DOCTYPE html>
<html lang="am">
<head>
  <meta charset="UTF-8">
  <title>á‹œáŠ“ áˆ›áŒ¥áŠá‹«</title>
  <link rel="stylesheet" href="css/news-delete.css" />
</head>
<body>
  <h2>á‹¨á‰³á‹˜á‹™ á‹œáŠ“á‹á‰½áŠ• áˆ›áŒ¥áŠá‹«</h2>

  <ul id="newsList"></ul>

  <script>
    async function loadNews() {
      const response = await fetch('/news');
      const news = await response.json();
      const list = document.getElementById('newsList');
      list.innerHTML = '';

      news.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `
          <span>${item.title}</span>
          <button onclick="deleteNews(${item.id}, this)">ğŸ—‘ Delete</button>
        `;
        list.appendChild(li);
      });
    }

    async function deleteNews(id, btn) {
      if (!confirm('á‹­áˆ…áŠ• á‹œáŠ“ á‰ áˆ˜áˆ°áˆ¨á‹ á‹­áˆáˆáŒ‹áˆ‰?')) return;

      const res = await fetch('/api/news/' + id, { method: 'DELETE' });
      if (res.ok) {
        btn.closest('li').remove();
        alert('âœ… á‰ á‰µáŠ­áŠ­áˆ á‰°áˆ°áˆ­á‹Ÿáˆá¢');
      } else {
        alert('âŒ áˆ›áŒ¥á‹á‰µ áŠ áˆá‰°á‰»áˆˆáˆá¢');
      }
    }

    window.onload = loadNews;
  </script>
</body>
</html>
